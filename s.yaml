services:
  name: industry-radar
  component: fc
  props:
    region: cn-hangzhou
    service:
      name: industry-radar-service
      description: 行研雷达服务
    function:
      name: industry-radar-func
      description: 行研雷达函数
      runtime: python3.9
      handler: codes/trigger_layer.handler
      memorySize: 128
      timeout: 30
      # 环境变量配置（可选）
      # 敏感凭据建议在阿里云控制台配置，或使用 ${env(VAR_NAME)} 引用本地 .env 文件
      # environmentVariables:
      #   SILICONFLOW_API_KEY: ${env(SILICONFLOW_API_KEY)}  # 必需：AI API Key
      #   LLM_MODEL: deepseek-ai/DeepSeek-V3                 # 可选：LLM 模型
      #   LLM_BASE_URL: https://api.siliconflow.cn/v1        # 可选：LLM API 地址
      #   LLM_MAX_RETRIES: "3"                               # 可选：重试次数
      #   DATA_DIR: /tmp/data                                # 可选：数据目录
    triggers:
      - name: timer-trigger
        type: timer
        config:
          cronExpression: '0 0 */6 * * *'
          payload: '{"keyword": "半导体"}'

# ==============================================================================
# Serverless Devs 部署说明
# ==============================================================================
# 
# 1. 安装 Serverless Devs CLI：
#    npm install -g @serverless-devs/s
#
# 2. 配置阿里云访问凭据（推荐使用 RAM 子账号）：
#    s config add
#
# 3. 配置环境变量（三种方式任选其一）：
#    方式 A：在上方 environmentVariables 中配置（适合非敏感配置）
#    方式 B：在阿里云控制台配置（推荐用于 API Key 等敏感信息）
#    方式 C：创建 .env 文件，通过 ${env(VAR)} 引用（适合本地开发）
#
# 4. 部署到阿里云：
#    s deploy
#
# 5. 测试函数：
#    s invoke -e '{"keyword": "半导体"}'
#
# 6. 查看日志：
#    s logs -t
#
# 详细说明请参考 README.md 中的"云端部署"章节
# ==============================================================================

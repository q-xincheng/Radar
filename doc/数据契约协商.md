## 1. 核心 JSON 结构建议

建议将 `Report` 分为 `metadata`（元数据）、`snapshot_data`（结构化指标）和 `raw_sources`（原始证据）三部分。

JSON

```
{
  "report_id": "rep_20260120_001",
  "metadata": {
    "keyword": "半导体",
    "collected_at": "2026-01-20T13:00:00Z",
    "version": "1.2"
  },
  "summary": {
    "total_changes": 2,
    "has_conflict": true,
    "overall_confidence": 0.85
  },
  "indicators": [
    {
      "field": "行业增长率",
      "current_value": "2%",
      "previous_value": "5%",
      "trend": "down",
      "last_updated": "2026-01-20",
      "source_evidence": {
        "source_type": "media",
        "source_name": "财联社",
        "url": "https://...",
        "weight": 0.7
      },
      "conflict_log": [
        {
          "value": "4.5%",
          "source": "rumor",
          "reason": "权重较低，转为待核实"
        }
      ]
    }
  ],
  "raw_items": [
     { "title": "...", "content": "...", "source": "official" }
  ]
}
```

---

## 2. 字段定义规范 (Data Schema)

为了让成员 A/B/C 协作无缝，必须对 `indicators` 数组中的字段达成共识：

|**字段名**|**类型**|**说明**|**示例**|
|---|---|---|---|
|`field`|String|**唯一键**。LLM 必须提取标准化的字段名（如“毛利率”）。|`"GDP增长预测"`|
|`current_value`|String|经过仲裁后的最终结论。|`"2%"`|
|`trend`|Enum|变化趋势：`up`, `down`, `stable`, `uncertain`。|`"down"`|
|`source_evidence`|Object|**当前结论的背书**。包含来源类型和原始链接。|`{...}`|
|`conflict_log`|Array|存放冲突但未被采纳的信息，用于展示“待核实”列表。|`[{value: '3%', ...}]`|

---

## 3. 来源权重系统设计 (Weighting System)

在 `models.py` 中，你已经定义了初步权重。为了更具实战性，建议扩展子分类并细化评分：

|**来源分类 (SourceType)**|**权重值 (Weight)**|**适用场景**|**仲裁逻辑**|
|---|---|---|---|
|**OFFICIAL**|**1.0**|证监会公告、公司年报、政府白皮书|**绝对优先**。覆盖一切其他来源。|
|**INSTITUTION**|**0.8**|高盛、中金等券商研报，行业协会数据|次高优先级。若有多个机构冲突，取**平均值**或**最新日期**。|
|**MEDIA**|**0.6**|财联社、华尔街见闻、第一财经|具有时效性。若官方未发声，以头部媒体为准。|
|**RUMOR**|**0.3**|雪球贴吧、社交媒体传闻|**仅作参考**。除非没有其他来源，否则不更新 `current_value`。|

---

## 4. 给各成员的实质性建议

### 给成员 B (AI/LLM)：关于 Prompt 的约束

不要让 LLM 自由发挥。在 Prompt 中明确要求：

> “请仅从新资讯中提取与旧结论不同的数值。如果字段不存在，请创建；如果数值发生变化，必须标注旧值。输出必须严格符合 JSON 模式，禁止包含任何自然语言解释。”

### 给成员 C (数据/展示)：关于高亮逻辑

在渲染 Markdown 或前端时，利用 `trend` 字段：

- `up`: 渲染为红色（或绿色，取决于金融习惯）并配上 `↑`。
    
- `conflict_log`: 如果该项不为空，在字段旁显示一个 **“⚠️ 存疑”** 标签，点击可查看被剔除的低权重信息。
    

### 给成员 A (架构)：关于版本控制

不要只存最新的 JSON。建议在存储层保留 **历史镜像**（如 `history/` 文件夹），因为“增量对比”需要 `current_report.json` 和 `latest_fetch.json` 两个输入。
